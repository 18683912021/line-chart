(function(e){function t(t){for(var a,c,r=t[0],u=t[1],d=t[2],b=0,s=[];b<r.length;b++)c=r[b],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&s.push(o[c][0]),o[c]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);i&&i(t);while(s.length)s.shift()();return n.push.apply(n,d||[]),l()}function l(){for(var e,t=0;t<n.length;t++){for(var l=n[t],a=!0,r=1;r<l.length;r++){var u=l[r];0!==o[u]&&(a=!1)}a&&(n.splice(t--,1),e=c(c.s=l[0]))}return e}var a={},o={app:0},n=[];function c(t){if(a[t])return a[t].exports;var l=a[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,c),l.l=!0,l.exports}c.m=e,c.c=a,c.d=function(e,t,l){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(c.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(l,a,function(t){return e[t]}.bind(null,a));return l},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/line-chart/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var i=u;n.push([0,"chunk-vendors"]),l()})({0:function(e,t,l){e.exports=l("56d7")},"0560":function(e,t,l){},"17fb":function(e,t,l){},"334f":function(e,t,l){"use strict";l("7af9")},"56d7":function(e,t,l){"use strict";l.r(t);var a=l("7a23");const o=Object(a["createElementVNode"])("div",{id:"nav"},null,-1);function n(e,t){const l=Object(a["resolveComponent"])("router-view");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[o,Object(a["createVNode"])(l)],64)}l("74be");var c=l("6b0d"),r=l.n(c);const u={},d=r()(u,[["render",n]]);var i=d,b=l("6605"),s=(l("14d9"),l("cee4"));const m=s["a"].create({baseURL:"/api",timeout:5e3});m.interceptors.request.use(e=>e,e=>Promise.reject(e)),m.interceptors.response.use(e=>{const t=e.data;return 200!==t.status?t.message:t},e=>Promise.reject(e));var p=l("313e");const v={class:"content"},O={class:"chart-box"},j={key:0,class:"config-box"};var f={__name:"ChartComponent",props:{result:{type:Array,default:[{x:0,y:0}]},width:{type:Number,default:20},height:{type:Number,default:30},isConfig:{type:Boolean,default:!1},pageIndex:{type:Number,default:1},maxAndMin:{type:Object,default:["max","min"]}},emits:["onSubmit","startMeasurement"],setup(e,{emit:t}){const l=t,o=Object(a["ref"])(null),n=Object(a["ref"])(null),c=Object(a["ref"])(!1);let r=null;const u=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9},{label:"10",value:10},{label:"11",value:11},{label:"12",value:12}],d=e,i=Object(a["reactive"])({ip:"127.0.0.1",port:18080,channelName:d.pageIndex,centerFrequency:1,scanWidth:1,referenceLevel:1,resolutionBandWidth:1,scanPoints:1});Object(a["watch"])(()=>[d.result,d.maxAndMin],([e,t])=>{r&&s(t)},{immediate:!0});const b=()=>{l("onSubmit",i)},s=e=>{let t=Object(a["toRaw"])(e);r=p["a"](o.value);const l={dataset:[{id:"dataset_raw",source:d.result}],title:{text:null!==d&&void 0!==d&&d.isConfig?"":"通道"+d.pageIndex},tooltip:{trigger:"axis",formatter:function(e){let t=e[0].data["x"]+"(MHz)<br/>";return e.forEach(e=>{t+=e.data["y"]+"(dBm)<br/>"}),t}},xAxis:{type:"category",name:"MHz",nameLocation:"end",axisLabel:{interval:d.isConfig?500:1e3}},yAxis:{name:"dBm",min:-150,max:20,nameLocation:"end",interval:10},lineStyle:{width:1},series:[{type:"line",showSymbol:!1,encode:{x:"x",y:"y",itemName:"dBm"}},{type:"line",showSymbol:!1,encode:{x:"x",y:"max",itemName:"dBm"},lineStyle:{opacity:t.find(e=>"max"==e)?1:0}},{type:"line",showSymbol:!1,encode:{x:"x",y:"min",itemName:"dBm"},lineStyle:{opacity:t.find(e=>"min"==e)?1:0}}],dataZoom:[{type:"inside",start:0,end:100}]};d.isConfig&&l.dataZoom.push({type:"slider",start:0,end:100}),r.setOption(l)};return Object(a["onMounted"])(()=>{s(d.maxAndMin)}),(t,l)=>{const r=Object(a["resolveComponent"])("el-input"),d=Object(a["resolveComponent"])("el-form-item"),s=Object(a["resolveComponent"])("el-option"),m=Object(a["resolveComponent"])("el-select"),p=Object(a["resolveComponent"])("el-input-number"),f=Object(a["resolveComponent"])("el-button"),h=Object(a["resolveComponent"])("el-form");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",v,[Object(a["createElementVNode"])("div",O,[Object(a["createElementVNode"])("div",{ref_key:"chartRef",ref:o,style:Object(a["normalizeStyle"])({width:""+(e.isConfig?e.width+"px":e.width+"vw"),height:""+(e.isConfig?e.height+"px":e.height+"vh")})},null,4)]),e.isConfig?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",j,[Object(a["createVNode"])(h,{model:i,"label-width":"auto",style:{"max-width":"600px"},ref_key:"formRef",ref:n},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,{label:"通道IP"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(r,{modelValue:i.ip,"onUpdate:modelValue":l[0]||(l[0]=e=>i.ip=e),placeholder:"请输入IP地址"},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(d,{label:"通道端口"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(r,{modelValue:i.port,"onUpdate:modelValue":l[1]||(l[1]=e=>i.port=e),placeholder:"请输入端口"},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(d,{label:"通道选择"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(m,{modelValue:i.channelName,"onUpdate:modelValue":l[2]||(l[2]=e=>i.channelName=e),placeholder:"请选择"},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(u,(e,t)=>Object(a["createVNode"])(s,{label:e.label,value:e.value,key:t},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),Object(a["createVNode"])(d,{label:"中心频率(MHz)"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{controls:!1,style:{width:"100%"},modelValue:i.centerFrequency,"onUpdate:modelValue":l[3]||(l[3]=e=>i.centerFrequency=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(d,{label:"扫宽(MHz)"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{controls:!1,style:{width:"100%"},modelValue:i.scanWidth,"onUpdate:modelValue":l[4]||(l[4]=e=>i.scanWidth=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(d,{label:"参考电平(dBm)"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{controls:!1,style:{width:"100%"},modelValue:i.referenceLevel,"onUpdate:modelValue":l[5]||(l[5]=e=>i.referenceLevel=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(d,{label:"分辨率带宽(MHz)"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{controls:!1,style:{width:"100%"},modelValue:i.resolutionBandWidth,"onUpdate:modelValue":l[6]||(l[6]=e=>i.resolutionBandWidth=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(d,{label:"扫描点数"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{controls:!1,style:{width:"100%"},modelValue:i.scanPoints,"onUpdate:modelValue":l[7]||(l[7]=e=>i.scanPoints=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(d,{style:{"text-align":"center"},class:"button-group"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(f,{type:"primary",onClick:b,loading:c.value},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("开始测量")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):Object(a["createCommentVNode"])("",!0)])}}};l("9d71");const h=r()(f,[["__scopeId","data-v-735bf1cb"]]);var x=h;const y={class:"charts-container"};var V={__name:"Home",setup(e){const t=Object(a["ref"])(!1),l=Object(a["ref"])(1),o=Object(a["ref"])("通道"+l),n=Object(a["ref"])(Array.from({length:12},()=>[])),c=(Object(a["ref"])(Array.from({length:12},()=>[])),Object(a["ref"])([1,2,3,4,5,6,7,8,9,10,11,12])),r=Object(a["ref"])([1,2,3,4,5,6,7,8,9,10,11,12]),u=Object(a["ref"])(20),d=Object(a["ref"])(29),i=Object(a["ref"])(Array.from({length:12},()=>null)),b=Object(a["ref"])([]),s=Object(a["ref"])([{label:"通道1",value:1},{label:"通道2",value:2},{label:"通道3",value:3},{label:"通道4",value:4},{label:"通道5",value:5},{label:"通道6",value:6},{label:"通道7",value:7},{label:"通道8",value:8},{label:"通道9",value:9},{label:"通道10",value:10},{label:"通道11",value:11},{label:"通道12",value:12}]),m=Object(a["ref"])(Array.from({length:12},()=>[]));let p=null;const v=e=>{try{p=new WebSocket("ws://127.0.0.1:8889/websocket"),p.onopen=()=>{console.log("WebSocket connection opened")},p.onmessage=e=>{if(!b.value.includes(l.value))return;const t=e.data.split(" ").map(Number).filter(e=>!isNaN(e)).slice(0,1e4),a=n.value[l.value];if(0===a.length)n.value[l.value]=t.map((e,t)=>({x:t,y:e,max:e,min:e}));else if(n.value[l.value]=a.map((e,l)=>{if(l<t.length){const a=t[l];return{x:e.x,y:a,max:Math.max(e.max,a),min:Math.min(e.min,a)}}return{x:e.x,y:null,max:e.max,min:e.min}}),t.length>a.length){const e=t.slice(a.length).map((e,t)=>({x:a.length+t,y:e,max:e,min:e}));n.value[l.value].push(...e)}},p.onerror=e=>{console.error("WebSocket error:",e)},p.onclose=()=>{console.log("WebSocket connection closed")},i.value[e]=p}catch(t){console.error("Failed to create WebSocket:",t)}},O=e=>e.sort((e,t)=>Number(e)-Number(t)),j=e=>{c.value=O(e),(null===e||void 0===e?void 0:e.length)<=4?(d.value=1==e.length?90:45,u.value=e.length<=2?90:45):(d.value=29,u.value=20)},f=e=>{const a=e-1;i.value[a]||v(a),l.value=a,o.value="通道"+e,t.value=!0},h=e=>{i.value[l.value]&&(p.send(JSON.stringify(e)),b.value.push(l.value))},V=()=>{},g=()=>{console.log("startMeasurement")};return(e,i)=>{const b=Object(a["resolveComponent"])("el-checkbox"),p=Object(a["resolveComponent"])("el-checkbox-group"),v=Object(a["resolveComponent"])("el-dialog");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createElementVNode"])("div",y,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(c.value,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"parent-box",key:e},[Object(a["createVNode"])(p,{class:"checkbox-group",modelValue:m.value[e-1],"onUpdate:modelValue":t=>m.value[e-1]=t,style:{"text-align":"left"}},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(b,{value:"max"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" 最大值保持 ")]),_:1}),Object(a["createVNode"])(b,{value:"min"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" 最小值保持 ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),(Object(a["openBlock"])(),Object(a["createBlock"])(x,{key:u.value+"-"+d.value+"-"+e,result:n.value[e-1],onClick:t=>f(e),pageIndex:e,width:u.value,height:d.value,maxAndMin:m.value[e-1]},null,8,["result","onClick","pageIndex","width","height","maxAndMin"]))]))),128))]),Object(a["createVNode"])(v,{modelValue:t.value,"onUpdate:modelValue":i[1]||(i[1]=e=>t.value=e),title:o.value,width:"1350","destroy-on-close":"",onClose:V},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{class:"checkbox-group",modelValue:m.value[l.value],"onUpdate:modelValue":i[0]||(i[0]=e=>m.value[l.value]=e)},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(b,{value:"max"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" 最大值保持 ")]),_:1}),Object(a["createVNode"])(b,{value:"min"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" 最小值保持 ")]),_:1})]),_:1},8,["modelValue"]),Object(a["createVNode"])(x,{onOnSubmit:h,onStartMeasurement:g,result:n.value[l.value],width:1e3,height:600,isConfig:!0,pageIndex:l.value,maxAndMin:m.value[l.value]},null,8,["result","pageIndex","maxAndMin"])]),_:1},8,["modelValue","title"]),Object(a["createVNode"])(p,{modelValue:r.value,"onUpdate:modelValue":i[2]||(i[2]=e=>r.value=e),onChange:j,class:"floatActionDialog"},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(s.value,e=>(Object(a["openBlock"])(),Object(a["createBlock"])(b,{key:e.value,label:e.label,value:e.value},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.label),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])],64)}}};l("334f");const g=r()(V,[["__scopeId","data-v-e088b476"]]);var w=g;const N=[{path:"/",name:"Home",component:w}],C=Object(b["a"])({history:Object(b["b"])(),routes:N});var k=C,_=l("5502"),B=Object(_["a"])({state:{},mutations:{},actions:{},modules:{}}),S=(l("7437"),l("c3a1"));Object(a["createApp"])(i).use(B).use(S["a"]).use(k).mount("#app")},"74be":function(e,t,l){"use strict";l("0560")},"7af9":function(e,t,l){},"9d71":function(e,t,l){"use strict";l("17fb")}});
//# sourceMappingURL=app.4219ef0e.js.map