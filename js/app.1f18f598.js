(function(e){function t(t){for(var a,c,r=t[0],u=t[1],i=t[2],b=0,s=[];b<r.length;b++)c=r[b],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&s.push(o[c][0]),o[c]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);d&&d(t);while(s.length)s.shift()();return n.push.apply(n,i||[]),l()}function l(){for(var e,t=0;t<n.length;t++){for(var l=n[t],a=!0,r=1;r<l.length;r++){var u=l[r];0!==o[u]&&(a=!1)}a&&(n.splice(t--,1),e=c(c.s=l[0]))}return e}var a={},o={app:0},n=[];function c(t){if(a[t])return a[t].exports;var l=a[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,c),l.l=!0,l.exports}c.m=e,c.c=a,c.d=function(e,t,l){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(c.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(l,a,function(t){return e[t]}.bind(null,a));return l},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/line-chart/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=t,r=r.slice();for(var i=0;i<r.length;i++)t(r[i]);var d=u;n.push([0,"chunk-vendors"]),l()})({0:function(e,t,l){e.exports=l("56d7")},"0560":function(e,t,l){},"100c":function(e,t,l){"use strict";l("3366")},3366:function(e,t,l){},"56d7":function(e,t,l){"use strict";l.r(t);var a=l("7a23");const o=Object(a["createElementVNode"])("div",{id:"nav"},null,-1);function n(e,t){const l=Object(a["resolveComponent"])("router-view");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[o,Object(a["createVNode"])(l)],64)}l("74be");var c=l("6b0d"),r=l.n(c);const u={},i=r()(u,[["render",n]]);var d=i,b=l("6605"),s=(l("14d9"),l("cee4"));const m=s["a"].create({baseURL:"/api",timeout:5e3});m.interceptors.request.use(e=>e,e=>Promise.reject(e)),m.interceptors.response.use(e=>{const t=e.data;return 200!==t.status?t.message:t},e=>Promise.reject(e));var p=l("313e");const v={class:"content"},O={class:"chart-box"},j={key:0,class:"config-box"};var f={__name:"ChartComponent",props:{result:{type:Array,default:[{x:0,y:0}]},width:{type:Number,default:20},height:{type:Number,default:30},isConfig:{type:Boolean,default:!1},pageIndex:{type:Number,default:1},maxAndMin:{type:Object,default:["max","min"]}},emits:["onSubmit","startMeasurement"],setup(e,{emit:t}){const l=t,o=Object(a["ref"])(null),n=Object(a["ref"])(null),c=Object(a["ref"])(!1);let r=null;const u=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9},{label:"10",value:10},{label:"11",value:11},{label:"12",value:12}],i=e,d=Object(a["reactive"])({ip:"127.0.0.1",port:18080,channelName:i.pageIndex+1,centerFrequency:1,scanWidth:1,referenceLevel:1,resolutionBandWidth:1,scanPoints:1});Object(a["watch"])(()=>[i.result,i.maxAndMin],([e,t])=>{if(r){let l=Object(a["toRaw"])(t);r.setOption({dataset:[{id:"dataset_raw",source:e}],series:[{type:"line",showSymbol:!1,encode:{x:"x",y:"y",itemName:"dBm"}},{type:"line",showSymbol:!1,encode:{x:"x",y:"max",itemName:"dBm"},lineStyle:{opacity:l.find(e=>"max"==e)?1:0}},{type:"line",showSymbol:!1,encode:{x:"x",y:"min",itemName:"dBm"},lineStyle:{opacity:l.find(e=>"min"==e)?1:0}}]})}},{immediate:!0});const b=()=>{l("onSubmit",d)},s=e=>{let t=Object(a["toRaw"])(e);r=p["a"](o.value);const l={dataset:[{id:"dataset_raw",source:i.result}],title:{text:null!==i&&void 0!==i&&i.isConfig?"":"通道"+i.pageIndex},tooltip:{trigger:"axis",formatter:function(e){let t=e[0].data["x"]+"(MHz)<br/>";return e.forEach(e=>{t+=e.data["y"]+"(dBm)<br/>"}),t}},xAxis:{type:"category",name:"MHz",nameLocation:"end",axisLabel:{interval:i.isConfig?500:1e3}},yAxis:{name:"dBm",min:-150,max:20,nameLocation:"end",interval:10},lineStyle:{width:1},series:[{type:"line",large:!0,showSymbol:!1,encode:{x:"x",y:"y",itemName:"dBm"}},{type:"line",showSymbol:!1,encode:{x:"x",y:"max",itemName:"dBm"},lineStyle:{opacity:t.find(e=>"max"==e)?1:0}},{type:"line",showSymbol:!1,encode:{x:"x",y:"min",itemName:"dBm"},lineStyle:{opacity:t.find(e=>"min"==e)?1:0}}],dataZoom:[{type:"inside",start:0,end:100}]};i.isConfig&&l.dataZoom.push({type:"slider",start:0,end:100}),r.setOption(l)};return Object(a["onMounted"])(()=>{s(i.maxAndMin)}),(t,l)=>{const r=Object(a["resolveComponent"])("el-input"),i=Object(a["resolveComponent"])("el-form-item"),s=Object(a["resolveComponent"])("el-option"),m=Object(a["resolveComponent"])("el-select"),p=Object(a["resolveComponent"])("el-input-number"),f=Object(a["resolveComponent"])("el-button"),h=Object(a["resolveComponent"])("el-form");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",v,[Object(a["createElementVNode"])("div",O,[Object(a["createElementVNode"])("div",{ref_key:"chartRef",ref:o,style:Object(a["normalizeStyle"])({width:""+(e.isConfig?e.width+"px":e.width+"vw"),height:""+(e.isConfig?e.height+"px":e.height+"vh")})},null,4)]),e.isConfig?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",j,[Object(a["createVNode"])(h,{model:d,"label-width":"auto",style:{"max-width":"600px"},ref_key:"formRef",ref:n},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i,{label:"通道IP"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(r,{modelValue:d.ip,"onUpdate:modelValue":l[0]||(l[0]=e=>d.ip=e),placeholder:"请输入IP地址"},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"通道端口"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(r,{modelValue:d.port,"onUpdate:modelValue":l[1]||(l[1]=e=>d.port=e),placeholder:"请输入端口"},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"通道选择"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(m,{modelValue:d.channelName,"onUpdate:modelValue":l[2]||(l[2]=e=>d.channelName=e),placeholder:"请选择"},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(u,(e,t)=>Object(a["createVNode"])(s,{label:e.label,value:e.value,key:t},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"中心频率(MHz)"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{controls:!1,style:{width:"100%"},modelValue:d.centerFrequency,"onUpdate:modelValue":l[3]||(l[3]=e=>d.centerFrequency=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"扫宽(MHz)"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{controls:!1,style:{width:"100%"},modelValue:d.scanWidth,"onUpdate:modelValue":l[4]||(l[4]=e=>d.scanWidth=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"参考电平(dBm)"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{controls:!1,style:{width:"100%"},modelValue:d.referenceLevel,"onUpdate:modelValue":l[5]||(l[5]=e=>d.referenceLevel=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"分辨率带宽(MHz)"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{controls:!1,style:{width:"100%"},modelValue:d.resolutionBandWidth,"onUpdate:modelValue":l[6]||(l[6]=e=>d.resolutionBandWidth=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"扫描点数"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{controls:!1,style:{width:"100%"},modelValue:d.scanPoints,"onUpdate:modelValue":l[7]||(l[7]=e=>d.scanPoints=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{style:{"text-align":"center"},class:"button-group"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(f,{type:"primary",onClick:b,loading:c.value},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("开始测量")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):Object(a["createCommentVNode"])("",!0)])}}};l("100c");const h=r()(f,[["__scopeId","data-v-732b305b"]]);var x=h;const y={class:"charts-container"};var g={__name:"Home",setup(e){const t=Object(a["ref"])(!1),l=Object(a["ref"])(1),o=Object(a["ref"])("通道"+l),n=Object(a["ref"])(Array.from({length:12},()=>[])),c=(Object(a["ref"])(Array.from({length:12},()=>[])),Object(a["ref"])([1,2,3,4,5,6,7,8,9,10,11,12])),r=Object(a["ref"])([1,2,3,4,5,6,7,8,9,10,11,12]),u=Object(a["ref"])(20),i=Object(a["ref"])(29),d=Object(a["ref"])(Array.from({length:12},()=>null)),b=Object(a["ref"])([]),s=Object(a["ref"])([{label:"通道1",value:1},{label:"通道2",value:2},{label:"通道3",value:3},{label:"通道4",value:4},{label:"通道5",value:5},{label:"通道6",value:6},{label:"通道7",value:7},{label:"通道8",value:8},{label:"通道9",value:9},{label:"通道10",value:10},{label:"通道11",value:11},{label:"通道12",value:12}]),m=Object(a["ref"])(Array.from({length:12},()=>[]));Object(a["onMounted"])(()=>{p()});const p=()=>{for(let e=0;e<12;e++){const t=new WebSocket("ws://127.0.0.1:8889/websocket");t.onopen=()=>{console.log(`WebSocket ${e+1} 已连接`)},t.onmessage=t=>{console.log(`WebSocket ${e+1} 收到消息: `);const l=t.data.split(" ").map(Number).filter(e=>!isNaN(e)).slice(0,1e4),a=n.value[e];if(0===a.length)n.value[e]=l.map((e,t)=>({x:t,y:e,max:e,min:e}));else if(n.value[e]=a.map((e,t)=>{if(t<l.length){const a=l[t];return{x:e.x,y:a,max:Math.max(e.max,a),min:Math.min(e.min,a)}}return{x:e.x,y:null,max:e.max,min:e.min}}),l.length>a.length){const t=l.slice(a.length).map((e,t)=>({x:a.length+t,y:e,max:e,min:e}));n.value[e].push(...t)}},t.onerror=t=>{console.log(`WebSocket ${e+1} 出现错误: `,t)},t.onclose=()=>{console.log(`WebSocket ${e+1} 已关闭`)},d.value[e]=t}},v=e=>e.sort((e,t)=>Number(e)-Number(t)),O=e=>{c.value=v(e),(null===e||void 0===e?void 0:e.length)<=4?(i.value=1==e.length?90:45,u.value=e.length<=2?90:45):(i.value=29,u.value=20)},j=e=>{const a=e-1;d.value[a],l.value=a,o.value="通道"+e,t.value=!0},f=e=>{console.log(d.value),d.value[l.value]&&(console.log(d.value[l.value]),d.value[l.value].send(JSON.stringify(e)),b.value.push(l.value))},h=()=>{},g=()=>{console.log("startMeasurement")};return Object(a["onBeforeUnmount"])(()=>{sockets.value.forEach((e,t)=>{console.log(`WebSocket ${t} 关闭中...`),e.close(),e.onclose=null}),d.value=[]}),(e,d)=>{const b=Object(a["resolveComponent"])("el-checkbox"),p=Object(a["resolveComponent"])("el-checkbox-group"),v=Object(a["resolveComponent"])("el-dialog");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createElementVNode"])("div",y,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(c.value,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"parent-box",key:e},[Object(a["createVNode"])(p,{class:"checkbox-group",modelValue:m.value[e-1],"onUpdate:modelValue":t=>m.value[e-1]=t,style:{"text-align":"left"}},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(b,{value:"max"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" 最大值保持 ")]),_:1}),Object(a["createVNode"])(b,{value:"min"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" 最小值保持 ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),(Object(a["openBlock"])(),Object(a["createBlock"])(x,{key:u.value+"-"+i.value+"-"+e,result:n.value[e-1],onClick:t=>j(e),pageIndex:e,width:u.value,height:i.value,maxAndMin:m.value[e-1]},null,8,["result","onClick","pageIndex","width","height","maxAndMin"]))]))),128))]),Object(a["createVNode"])(v,{modelValue:t.value,"onUpdate:modelValue":d[1]||(d[1]=e=>t.value=e),title:o.value,width:"1350","destroy-on-close":"",onClose:h},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{class:"checkbox-group",modelValue:m.value[l.value],"onUpdate:modelValue":d[0]||(d[0]=e=>m.value[l.value]=e)},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(b,{value:"max"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" 最大值保持 ")]),_:1}),Object(a["createVNode"])(b,{value:"min"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" 最小值保持 ")]),_:1})]),_:1},8,["modelValue"]),Object(a["createVNode"])(x,{onOnSubmit:f,onStartMeasurement:g,result:n.value[l.value],width:1e3,height:600,isConfig:!0,pageIndex:l.value,maxAndMin:m.value[l.value]},null,8,["result","pageIndex","maxAndMin"])]),_:1},8,["modelValue","title"]),Object(a["createVNode"])(p,{modelValue:r.value,"onUpdate:modelValue":d[2]||(d[2]=e=>r.value=e),onChange:O,class:"floatActionDialog"},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(s.value,e=>(Object(a["openBlock"])(),Object(a["createBlock"])(b,{key:e.value,label:e.label,value:e.value},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.label),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])],64)}}};l("821e");const V=r()(g,[["__scopeId","data-v-681b381e"]]);var w=V;const N=[{path:"/",name:"Home",component:w}],C=Object(b["a"])({history:Object(b["b"])(),routes:N});var k=C,_=l("5502"),B=Object(_["a"])({state:{},mutations:{},actions:{},modules:{}}),S=(l("7437"),l("c3a1"));Object(a["createApp"])(d).use(B).use(S["a"]).use(k).mount("#app")},"74be":function(e,t,l){"use strict";l("0560")},"821e":function(e,t,l){"use strict";l("dbd7")},dbd7:function(e,t,l){}});
//# sourceMappingURL=app.1f18f598.js.map