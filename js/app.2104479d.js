(function(e){function t(t){for(var a,c,r=t[0],u=t[1],d=t[2],b=0,s=[];b<r.length;b++)c=r[b],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&s.push(o[c][0]),o[c]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);i&&i(t);while(s.length)s.shift()();return n.push.apply(n,d||[]),l()}function l(){for(var e,t=0;t<n.length;t++){for(var l=n[t],a=!0,r=1;r<l.length;r++){var u=l[r];0!==o[u]&&(a=!1)}a&&(n.splice(t--,1),e=c(c.s=l[0]))}return e}var a={},o={app:0},n=[];function c(t){if(a[t])return a[t].exports;var l=a[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,c),l.l=!0,l.exports}c.m=e,c.c=a,c.d=function(e,t,l){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(c.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(l,a,function(t){return e[t]}.bind(null,a));return l},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/line-chart/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var i=u;n.push([0,"chunk-vendors"]),l()})({0:function(e,t,l){e.exports=l("56d7")},"0560":function(e,t,l){},"05606":function(e,t,l){},3778:function(e,t,l){"use strict";l("8bb4")},"56d7":function(e,t,l){"use strict";l.r(t);var a=l("7a23");const o=Object(a["createElementVNode"])("div",{id:"nav"},null,-1);function n(e,t){const l=Object(a["resolveComponent"])("router-view");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[o,Object(a["createVNode"])(l)],64)}l("74be");var c=l("6b0d"),r=l.n(c);const u={},d=r()(u,[["render",n]]);var i=d,b=l("6605"),s=l("cee4");const m=s["a"].create({baseURL:"/api",timeout:5e3});m.interceptors.request.use(e=>e,e=>Promise.reject(e)),m.interceptors.response.use(e=>{const t=e.data;return 200!==t.status?t.message:t},e=>Promise.reject(e));l("14d9");var p=l("313e");const O={class:"content"},j={class:"chart-box"},v={key:0,class:"config-box"};var f={__name:"ChartComponent",props:{result:{type:Array,default:[{x:0,y:0}]},width:{type:Number,default:20},height:{type:Number,default:30},isConfig:{type:Boolean,default:!1},pageIndex:{type:Number,default:1}},emits:["onSubmit","startMeasurement"],setup(e,{emit:t}){const l=t,o=Object(a["ref"])(null),n=Object(a["ref"])(null),c=Object(a["ref"])(!1);let r=null;const u=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9},{label:"10",value:10},{label:"11",value:11},{label:"12",value:12}],d=Object(a["reactive"])({ip:"127.0.0.1",port:18080,channelName:1,centerFrequency:1,scanWidth:1,referenceLevel:1,resolutionBandWidth:1,scanPoints:1}),i=e;Object(a["watch"])(()=>i.result,e=>{r&&r.setOption({dataset:[{id:"dataset_raw",source:e}]})},{immediate:!0});const b=()=>{l("onSubmit",d)},s=()=>{r=p["a"](o.value);const e={dataset:[{id:"dataset_raw",source:i.result}],title:{text:null!==i&&void 0!==i&&i.isConfig?"":"通道"+i.pageIndex},tooltip:{trigger:"axis",formatter:function(e){let t=e[0].data["x"]+"(MHz)<br/>";return e.forEach(e=>{t+=e.data["y"]+"(dBm)<br/>"}),t}},xAxis:{type:"category",name:"MHz",nameLocation:"end",axisLabel:{interval:i.isConfig?500:150}},yAxis:{name:"dBm",min:-150,max:20,nameLocation:"end",interval:10},lineStyle:{width:1},series:[{type:"line",datasetId:"dataset_raw",showSymbol:!1,encode:{x:"x",y:"y",itemName:"dBm"}}],dataZoom:[{type:"inside",start:0,end:100}]};i.isConfig&&e.dataZoom.push({type:"slider",start:0,end:100}),r.setOption(e)};return Object(a["onMounted"])(()=>{s()}),(t,l)=>{const r=Object(a["resolveComponent"])("el-input"),i=Object(a["resolveComponent"])("el-form-item"),s=Object(a["resolveComponent"])("el-option"),m=Object(a["resolveComponent"])("el-select"),p=Object(a["resolveComponent"])("el-input-number"),f=Object(a["resolveComponent"])("el-button"),h=Object(a["resolveComponent"])("el-form");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",O,[Object(a["createElementVNode"])("div",j,[Object(a["createElementVNode"])("div",{ref_key:"chartRef",ref:o,style:Object(a["normalizeStyle"])({width:""+(e.isConfig?e.width+"px":e.width+"vw"),height:""+(e.isConfig?e.height+"px":e.height+"vh")})},null,4)]),e.isConfig?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",v,[Object(a["createVNode"])(h,{model:d,"label-width":"auto",style:{"max-width":"600px"},ref_key:"formRef",ref:n},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i,{label:"通道IP"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(r,{modelValue:d.ip,"onUpdate:modelValue":l[0]||(l[0]=e=>d.ip=e),placeholder:"请输入IP地址"},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"通道端口"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(r,{modelValue:d.port,"onUpdate:modelValue":l[1]||(l[1]=e=>d.port=e),placeholder:"请输入端口"},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"通道选择"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(m,{modelValue:d.channelName,"onUpdate:modelValue":l[2]||(l[2]=e=>d.channelName=e),placeholder:"请选择"},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(u,(e,t)=>Object(a["createVNode"])(s,{label:e.label,value:e.value,key:t},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"中心频率(MHz)"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{controls:!1,style:{width:"100%"},modelValue:d.centerFrequency,"onUpdate:modelValue":l[3]||(l[3]=e=>d.centerFrequency=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"扫宽(MHz)"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{controls:!1,style:{width:"100%"},modelValue:d.scanWidth,"onUpdate:modelValue":l[4]||(l[4]=e=>d.scanWidth=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"参考电平(dBm)"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{controls:!1,style:{width:"100%"},modelValue:d.referenceLevel,"onUpdate:modelValue":l[5]||(l[5]=e=>d.referenceLevel=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"分辨率带宽(MHz)"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{controls:!1,style:{width:"100%"},modelValue:d.resolutionBandWidth,"onUpdate:modelValue":l[6]||(l[6]=e=>d.resolutionBandWidth=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"扫描点数"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{controls:!1,style:{width:"100%"},modelValue:d.scanPoints,"onUpdate:modelValue":l[7]||(l[7]=e=>d.scanPoints=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{style:{"text-align":"center"},class:"button-group"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(f,{type:"primary",onClick:b,loading:c.value},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("开始测量")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):Object(a["createCommentVNode"])("",!0)])}}};l("90df");const h=r()(f,[["__scopeId","data-v-f40f240a"]]);var V=h;const x={class:"charts-container"};var g={__name:"Home",setup(e){const t=Object(a["ref"])(!1),l=Object(a["ref"])(1),o=Object(a["ref"])("通道"+l),n=(Object(a["ref"])(Array.from({length:12},()=>[])),Object(a["ref"])([1,2,3,4,5,6,7,8,9,10,11,12])),c=Object(a["ref"])([1,2,3,4,5,6,7,8,9,10,11,12]),r=Object(a["ref"])(20),u=Object(a["ref"])(29),d=Object(a["ref"])([{label:"通道1",value:1},{label:"通道2",value:2},{label:"通道3",value:3},{label:"通道4",value:4},{label:"通道5",value:5},{label:"通道6",value:6},{label:"通道7",value:7},{label:"通道8",value:8},{label:"通道9",value:9},{label:"通道10",value:10},{label:"通道11",value:11},{label:"通道12",value:12}]),i=Object(a["ref"])(Array.from({length:12},()=>["max","min"]));let b=null;const s=()=>{try{b=new WebSocket("ws://127.0.0.1:8889/websocket"),b.onopen=()=>{console.log("WebSocket connection opened")},b.onmessage=e=>{currentYAxis.value[l.value]=e.data.split(" ").filter(e=>e).slice(0,1e4).map((e,t)=>({x:t,y:e})),console.log("Received:",e.data)},b.onerror=e=>{console.error("WebSocket error:",e)},b.onclose=()=>{console.log("WebSocket connection closed")}}catch(e){console.error("Failed to create WebSocket:",e)}},m=e=>e.sort((e,t)=>Number(e)-Number(t)),p=e=>{n.value=m(e),(null===e||void 0===e?void 0:e.length)<=4?(u.value=1==e.length?90:45,r.value=e.length<=2?90:45):(u.value=29,r.value=20)},O=e=>{s(),l.value=e,o.value="通道"+e,t.value=!0},j=e=>{console.log(i.value)},v=e=>{b&&b.readyState===WebSocket.OPEN&&b.send(JSON.stringify(e))},f=()=>{b.close(),b.onclose=null,b.onmessage=null,b.onerror=null,b.onopen=null},h=()=>{console.log("startMeasurement")};return(e,b)=>{const s=Object(a["resolveComponent"])("el-checkbox"),m=Object(a["resolveComponent"])("el-checkbox-group"),g=Object(a["resolveComponent"])("el-dialog");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createElementVNode"])("div",x,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(n.value,t=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"parent-box",key:t},[Object(a["createVNode"])(m,{class:"checkbox-group",modelValue:i.value[t],"onUpdate:modelValue":e=>i.value[t]=e,onChange:j,style:{"text-align":"left"}},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{value:"max"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" 最大值保持 ")]),_:1}),Object(a["createVNode"])(s,{value:"min"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" 最小值保持 ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),(Object(a["openBlock"])(),Object(a["createBlock"])(V,{key:r.value+"-"+u.value+"-"+t,result:e.currentYAxis[t],onClick:e=>O(t),pageIndex:t,width:r.value,height:u.value},null,8,["result","onClick","pageIndex","width","height"]))]))),128))]),Object(a["createVNode"])(g,{modelValue:t.value,"onUpdate:modelValue":b[1]||(b[1]=e=>t.value=e),title:o.value,width:"1350","destroy-on-close":"",onClose:f},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(m,{class:"checkbox-group",modelValue:i.value[l.value],"onUpdate:modelValue":b[0]||(b[0]=e=>i.value[l.value]=e),onChange:j},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{value:"max"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" 最大值保持 ")]),_:1}),Object(a["createVNode"])(s,{value:"min"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" 最小值保持 ")]),_:1})]),_:1},8,["modelValue"]),Object(a["createVNode"])(V,{onOnSubmit:v,onStartMeasurement:h,result:e.currentYAxis[l.value],width:1e3,height:600,isConfig:!0,pageIndex:l.value},null,8,["result","pageIndex"])]),_:1},8,["modelValue","title"]),Object(a["createVNode"])(m,{modelValue:c.value,"onUpdate:modelValue":b[2]||(b[2]=e=>c.value=e),onChange:p,class:"floatActionDialog"},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(d.value,e=>(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:e.value,label:e.label,value:e.value},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.label),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])],64)}}};l("3778");const y=r()(g,[["__scopeId","data-v-61c0dcdf"]]);var w=y;const N=[{path:"/",name:"Home",component:w}],C=Object(b["a"])({history:Object(b["b"])(),routes:N});var k=C,_=l("5502"),B=Object(_["a"])({state:{},mutations:{},actions:{},modules:{}}),S=(l("7437"),l("c3a1"));Object(a["createApp"])(i).use(B).use(S["a"]).use(k).mount("#app")},"74be":function(e,t,l){"use strict";l("0560")},"8bb4":function(e,t,l){},"90df":function(e,t,l){"use strict";l("05606")}});
//# sourceMappingURL=app.2104479d.js.map